pipeline {
ageny any
tools{
maven 'Maven'
}
stages("Build Jar") {
stage {
script {
echo "Build Jar File"
sh "mvn package"
echo "Finished Building Jar File"
}
stages("Build Image") {
stage {
script {
echo "Building docker Image..."
withCredentials([usernamePassword(credentialsId: 'docker-repo', usernameVariable: 'USER', passwordVariable: 'PASS']){
sh "build -t name waseemkhandocker/my-docker-repo:jma-2.0"
sh "echo $PASS | docker login -u $USER --password-stdin"
sh "docker push  waseemkhandocker/my-docker-repo:jma-2.0"
}
}
stages("Build Deploy") {
stage {
script {
echo "Deploying Docker"
}
}
}
}
